---
import { getImgproxyUrl } from "../utils/imgproxy";

interface Props {
    title: string;
    excerpt: string;
    image: string;
    category: string;
    date: string;
    slug: string;
}

const { title, excerpt, image, category, date, slug } = Astro.props;

// Generate optimized URL via imgproxy for cards
const optimizedImage = getImgproxyUrl(image, 600, 338); // 16:9 aspect ratio
---

<article class="card bg-base-100 shadow-xl hover:shadow-2xl transition-all duration-300">
    <a href={slug} class="block relative overflow-hidden aspect-video">
        <img
            src={optimizedImage || image}
            alt={title}
            class="w-full h-full object-cover transition-transform duration-500 hover:scale-110"
            loading="lazy"
        />
        <div
            class="absolute inset-0 bg-black/20 hover:bg-black/10 transition-colors"
        >
        </div>
        <span
            class="absolute top-4 left-4 badge badge-primary"
        >
            {category}
        </span>
    </a>

    <div class="card-body">
        <div class="flex items-center text-sm text-base-content/60 mb-4">
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="mr-2"
                ><rect width="18" height="18" x="3" y="4" rx="2" ry="2"
                ></rect><line x1="16" x2="16" y1="2" y2="6"></line><line
                    x1="8"
                    x2="8"
                    y1="2"
                    y2="6"></line><line x1="3" x2="21" y1="10" y2="10"
                ></line></svg
            >
            {date}
        </div>

        <h3 class="card-title text-2xl font-heading leading-tight hover:text-primary transition-colors">
            <a href={slug}>
                {title}
            </a>
        </h3>

        <p class="text-base-content/70 line-clamp-3 mb-6">
            {excerpt}
        </p>

        <div class="card-actions justify-start">
            <a href={slug} class="link link-primary font-bold">
                Leer m√°s
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="20"
                    height="20"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="ml-1 transition-transform hover:translate-x-1"
                    ><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg
                >
            </a>
        </div>
    </div>
</article>
